


<form id="ckanForm" bind="form">


    <!-- odr dirty, to mimic standard url importing -->
    <input style="visibility:hidden; width:1px; height:1px" bind="urlInput" name="download" />

    <div id="ckan-ctrl-header"> 

        <div  style="position: relative;
              float:right">
            Substep 1 of 2 <button id="next-button" bind="nextButton" class="button button-primary" type="button"></button>
        </div>
        <div>
            <br/>
            <br/>
        </div>    
    </div>
    <div id="ckan-middle-container">
        <table >
            <tr>
                <td style="vertical-align:bottom">
                    <div>
                        URL of the CKAN catalog: 
                        <input type="text" id="ckan-url" value="$lastUsedCatalog" bind="ckanUrl"/>

                        <!--<select id="ckan-url" bind="ckanUrl" class="default-importing-web-url ckanSearch">
                            <option value="">Select one...</option>
                            <option value="http://dati.trentino.it"  selected="selected">http://dati.trentino.it</option>
                            <option value="http://data.gov.uk">http://data.gov.uk</option>

                        </select> -->
                    </div>
                    
                    <div id="catalog-stats-container" >         
                        <span id="stats-not-available-panel">
                            <br/>
                            Statistics for this catalog are not available. 
                        </span>
                        <table id="stats-table" bind="statsTable" border="1" width="100%" cellpadding="1" cellspacing="0">
                            <tbody>
                            <tr>
                                <td>Datasets</td>
                                <td class="stat" bind="totalDatasetsCount"> </td>
                                <td>Avg rows</td>
                                <td class="stat" bind="avgRowCount"></td>
                                <td>% of float columns</td>
                                <td class="stat" bind="floatPercentage"></td>
                                <td>% of date columns</td>
                                <td class="stat" bind="datePercentage"></td>
                                <td>% of GeoJSON columns</td>
                                <td class="stat" bind="geojsonPercentage"></td>
                                <td bind="avgStringLengthTitle">Avg string length</td>
                                <td class="stat" bind="avgStringLength"></td>
                            </tr>
                            <tr>
                                <td>Total size </td>
                                <td class="stat" bind="totalFileSizeCount"></td>
                                <td>Avg columns</td>
                                <td class="stat" bind="avgColumnCount"> </td>
                                <td>% of integer columns</td>
                                <td class="stat" bind="intPercentage"></td>
                                <td>% of string columns</td>
                                <td class="stat" bind="stringPercentage"></td>
                                <td>% of empty columns</td>
                                <td class="stat" bind="emptyPercentage"></td>

                                <td></td>
                                <td></td>
                            </tr> 
                        </tbody>
                        </table>  

                    </div>

                </td>
                <td style="vertical-align:bottom">
                    
                    <table id="ckan-graph" >
                        <tbody>
                        <tr>
                            <td style="padding:10px; ">        
                                <div id="chart_container">
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td style=" padding-top:5px; padding-bottom:5px; text-align:center; font-size: 14px">
                                <span id="graph-descr" >Catalog  string length distribution</span>
                            </td>
                        </tr>
                        </tbody>
                    </table>    
                </td>
            </tr>
        </table>
    </div>
    <div id="ckan-body">
        <table border="0"  width="100%" cellpadding="3" cellspacing="3">
            <tr>
                <td>
                    <div id="ckan-search-box" >
                        <div class="ckan-facet">
                            <div class="ckan-facet-title"> Search  </div>
                            <input id="ckan-search-input" class="ckanSearch" bind="ckanSearchInput" />                                                   
                        </div>
                        <!-- disabled for now
                        <div id="ckan-search-category">
                            
                        </div> -->

                        <div class="ckan-facet">
                            <div class="ckan-facet-title"> File types  </div>
                            <input id="ckan-format-csv" class="ckanSearch" type="radio" name="fileformats" value="csv" checked>CSV<br>
                            <input id="ckan-format-xml" class="ckanSearch" type="radio" name="fileformats" value="xml" bind="ckanFormatXml">XML<br>
                            <input id="ckan-format-json" class="ckanSearch" type="radio" name="fileformats" value="json" bind="ckanFormatJson">JSON<br>
                        </div> 


                    </div>                     
                </td>
                <td id="resources-container">

            <center>
                <span id="resources-not-available-panel">

                    Datasets for this catalog are not available. 

                </span>                    
            </center>
            <table   id="resources-table">
                <thead>
                    <tr>                        
                        <th>Dataset name</th>
                        <th>Resource id</th>
                        <th>Resource link</th>
                        <th></th>
                        <th>Resource name</th>
                        <th>Category</th>
                        <th>Format</th>
                        <th>Columns</th>
                        <th>Rows</th>
                        <th>String columns</th>
                        <th>Float columns</th>
                        <th>Integer columns</th>
                        <th>Date columns</th>
                        <th>GeoJSON columns</th>
                        <th>Empty columns</th>                                
                        <th>Avg string length</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>


            </td>
            </tr>
        </table>        

    </div>
  


</form>